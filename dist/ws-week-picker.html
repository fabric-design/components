<!-- inject:global -->
<!-- endinject -->
<template>
    <!-- inject:html -->
    <div class="ws-week-wrapper">
  <input type="text" class="ws-week-input" readonly placeholder="week picker" /> <i class="icon icon-calendar"></i>
  <div class="ws-week-picker">
    <div class="year-selector prev-year">
      <span class="icon checkPrevYear"></span>
      <div class="year"></div>
      <div class="weeks"></div>
    </div>
    <div class="year-selector cur-year">
      <div class="year"></div>
      <div class="weeks"></div>
    </div>
    <div class="year-selector next-year">
      <div class="year"></div>
      <span class="icon checkNextYear"></span>
      <div class="weeks"></div>
    </div>
  </div>
</div>

    <!-- endinject -->
    <style>
        /* inject:styles */
        @charset "UTF-8";

@font-face {
  font-family: "fontello";
  src: url("icons/font/fontello.eot?4287725");
  src: url("icons/font/fontello.eot?4287725#iefix") format("embedded-opentype"), url("icons/font/fontello.woff2?4287725") format("woff2"), url("icons/font/fontello.woff?4287725") format("woff"), url("icons/font/fontello.ttf?4287725") format("truetype"), url("icons/font/fontello.svg?4287725#fontello") format("svg");
  font-weight: normal;
  font-style: normal;
}

.icon,[class^="icon-"],[class*=" icon-"] {
  line-height: 1rem;
}

.icon:before,[class^="icon-"]:before,[class*=" icon-"]:before {
  font-family: "fontello";
  font-style: normal;
  font-weight: normal;
  speak: none;
  display: inline-block;
  text-decoration: inherit;
  width: 1em;
  text-align: center;
  font-variant: normal;
  text-transform: none;
  line-height: 1em;
  margin-right: .2em;
  margin-left: .2em;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.icon-cross:before {
  content: "Ó°ù";
}

/**
     * Spinner with zalando icon
     * Example: <span class="icon-zalando spinner"><span></span></span>
     */

@-webkit-keyframes animateRightBall {
  0% {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  50% {
    -webkit-transform: translate3d(1.5em, 0, 0);
    transform: translate3d(1.5em, 0, 0);
  }

  0% {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

@keyframes animateRightBall {
  0% {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  50% {
    -webkit-transform: translate3d(1.5em, 0, 0);
    transform: translate3d(1.5em, 0, 0);
  }

  0% {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

@-webkit-keyframes animateLeftBall {
  0% {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  50% {
    -webkit-transform: translate3d(-1.5em, 0, 0);
    transform: translate3d(-1.5em, 0, 0);
  }

  0% {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

@keyframes animateLeftBall {
  0% {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  50% {
    -webkit-transform: translate3d(-1.5em, 0, 0);
    transform: translate3d(-1.5em, 0, 0);
  }

  0% {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

input,select {
  display: block;
  font-family: acuminpro, "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 1rem;
}

input:not([type=radio]):not([type=checkbox]),select {
  padding: rem(8px);
  border: 1px solid #BDBFC7;
  box-shadow: inset 0px 1px 3px 0px #e6e7ea;
  box-sizing: border-box;
  outline: none;
  background-color: white;
  height: rem(34px);
  font-weight: normal;
  transition: border-color .2s linear, box-shadow .2s linear;
}

input:not([type=radio]):not([type=checkbox]):focus,select:focus {
  border-color: #008DC9;
  box-shadow: inset 0 1px 3px 0px #96e0ff;
}

input:not([type=radio]):not([type=checkbox]):disabled,select:disabled {
  background-color: #F5F6F9;
}

.input-wrapper {
  position: relative;
}

.input-wrapper .icon {
  position: absolute;
  top: 10px;
  right: 8px;
}

input[type="search"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

input[type="checkbox"],input[type="radio"] {
  margin-right: 0.34375rem;
}

input[type="file"] {
  padding-bottom: 0.6875rem;
  width: 100%;
}

select {
  max-width: 100%;
  width: auto;
}

/**
 * Parse a numeric value from a string
 */

/**
 * Convert a pixel value to rem
 */

/**
 * Convert a list of pixel values to rem values
 */

/**
* Z-index function for managing the values
*/

.ws-week-wrapper {
  display: inline-block;
  position: relative;
}

.ws-week-wrapper > #ws-week-icon {
  right: 11px;
  background: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDUxMS42MzQgNTExLjYzNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTExLjYzNCA1MTEuNjM0OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnPgoJPHBhdGggZD0iTTQ4Mi41MTMsODMuOTQyYy03LjIyNS03LjIzMy0xNS43OTctMTAuODUtMjUuNjk0LTEwLjg1aC0zNi41NDF2LTI3LjQxYzAtMTIuNTYtNC40NzctMjMuMzE1LTEzLjQyMi0zMi4yNjEgICBDMzk3LjkwNiw0LjQ3NSwzODcuMTU3LDAsMzc0LjU5MSwwaC0xOC4yNjhjLTEyLjU2NSwwLTIzLjMxOCw0LjQ3NS0zMi4yNjQsMTMuNDIyYy04Ljk0OSw4Ljk0NS0xMy40MjIsMTkuNzAxLTEzLjQyMiwzMi4yNjF2MjcuNDEgICBoLTEwOS42M3YtMjcuNDFjMC0xMi41Ni00LjQ3NS0yMy4zMTUtMTMuNDIyLTMyLjI2MUMxNzguNjQsNC40NzUsMTY3Ljg4NiwwLDE1NS4zMjEsMEgxMzcuMDUgICBjLTEyLjU2MiwwLTIzLjMxNyw0LjQ3NS0zMi4yNjQsMTMuNDIyYy04Ljk0NSw4Ljk0NS0xMy40MjEsMTkuNzAxLTEzLjQyMSwzMi4yNjF2MjcuNDFINTQuODIzYy05LjksMC0xOC40NjQsMy42MTctMjUuNjk3LDEwLjg1ICAgYy03LjIzMyw3LjIzMi0xMC44NSwxNS44LTEwLjg1LDI1LjY5N3YzNjUuNDUzYzAsOS44OSwzLjYxNywxOC40NTYsMTAuODUsMjUuNjkzYzcuMjMyLDcuMjMxLDE1Ljc5NiwxMC44NDksMjUuNjk3LDEwLjg0OWg0MDEuOTg5ICAgYzkuODk3LDAsMTguNDctMy42MTcsMjUuNjk0LTEwLjg0OWM3LjIzNC03LjIzNCwxMC44NTItMTUuODA0LDEwLjg1Mi0yNS42OTNWMTA5LjYzOSAgIEM0OTMuMzU3LDk5LjczOSw0ODkuNzQzLDkxLjE3NSw0ODIuNTEzLDgzLjk0MnogTTM0Ny4xODcsNDUuNjg2YzAtMi42NjcsMC44NDktNC44NTgsMi41Ni02LjU2NyAgIGMxLjcxMS0xLjcxMSwzLjkwMS0yLjU2OCw2LjU3LTIuNTY4aDE4LjI2OGMyLjY3LDAsNC44NTMsMC44NTQsNi41NywyLjU2OGMxLjcxMiwxLjcxMiwyLjU2NywzLjkwMywyLjU2Nyw2LjU2N3Y4Mi4yMjQgICBjMCwyLjY2Ni0wLjg1NSw0Ljg1My0yLjU2Nyw2LjU2N2MtMS43MTgsMS43MDktMy45LDIuNTY4LTYuNTcsMi41NjhoLTE4LjI2OGMtMi42NjksMC00Ljg1OS0wLjg1NS02LjU3LTIuNTY4ICAgYy0xLjcxMS0xLjcxNS0yLjU2LTMuOTAxLTIuNTYtNi41NjdWNDUuNjg2eiBNMTI3LjkxNSw0NS42ODZjMC0yLjY2NywwLjg1NS00Ljg1OCwyLjU2OC02LjU2NyAgIGMxLjcxNC0xLjcxMSwzLjkwMS0yLjU2OCw2LjU2Ny0yLjU2OGgxOC4yNzFjMi42NjcsMCw0Ljg1OCwwLjg1NCw2LjU2NywyLjU2OGMxLjcxMSwxLjcxMiwyLjU3LDMuOTAzLDIuNTcsNi41Njd2ODIuMjI0ICAgYzAsMi42NjYtMC44NTUsNC44NTYtMi41Nyw2LjU2N2MtMS43MTMsMS43MDktMy45LDIuNTY4LTYuNTY3LDIuNTY4SDEzNy4wNWMtMi42NjYsMC00Ljg1Ni0wLjg1NS02LjU2Ny0yLjU2OCAgIGMtMS43MDktMS43MTUtMi41NjgtMy45MDEtMi41NjgtNi41NjdWNDUuNjg2eiBNNDU2LjgxMiw0NzUuMDg4SDU0LjgyM3YtMjkyLjM2aDQwMS45ODlWNDc1LjA4OHoiIGZpbGw9IiMwMDAwMDAiLz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K);
  top: 8px;
  position: absolute;
  width: 16px;
  height: 16px;
}

.ws-week-wrapper > input {
  padding: 0.5rem;
  border: 1px solid #BDBFC7;
  box-shadow: inset 0px 1px 3px 0px #e6e7ea;
  box-sizing: border-box;
  outline: none;
  background-color: white;
  height: 2.125rem;
  font-weight: normal;
  transition: border-color .2s linear, box-shadow .2s linear;
  font-family: inherit;
  color: inherit;
  width: 100%;
}

.ws-week-wrapper > input:focus {
  border-color: #008DC9;
  box-shadow: inset 0 1px 3px 0px #96e0ff;
}

.ws-week-wrapper > input:disabled {
  background-color: #F5F6F9;
}

.ws-week-wrapper > input + .icon {
  width: 16px;
  height: 16px;
  right: 11px;
  top: 8px;
  position: absolute;
}

.ws-week-wrapper > input + .icon.icon-calendar {
  background: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDUxMS42MzQgNTExLjYzNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTExLjYzNCA1MTEuNjM0OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnPgoJPHBhdGggZD0iTTQ4Mi41MTMsODMuOTQyYy03LjIyNS03LjIzMy0xNS43OTctMTAuODUtMjUuNjk0LTEwLjg1aC0zNi41NDF2LTI3LjQxYzAtMTIuNTYtNC40NzctMjMuMzE1LTEzLjQyMi0zMi4yNjEgICBDMzk3LjkwNiw0LjQ3NSwzODcuMTU3LDAsMzc0LjU5MSwwaC0xOC4yNjhjLTEyLjU2NSwwLTIzLjMxOCw0LjQ3NS0zMi4yNjQsMTMuNDIyYy04Ljk0OSw4Ljk0NS0xMy40MjIsMTkuNzAxLTEzLjQyMiwzMi4yNjF2MjcuNDEgICBoLTEwOS42M3YtMjcuNDFjMC0xMi41Ni00LjQ3NS0yMy4zMTUtMTMuNDIyLTMyLjI2MUMxNzguNjQsNC40NzUsMTY3Ljg4NiwwLDE1NS4zMjEsMEgxMzcuMDUgICBjLTEyLjU2MiwwLTIzLjMxNyw0LjQ3NS0zMi4yNjQsMTMuNDIyYy04Ljk0NSw4Ljk0NS0xMy40MjEsMTkuNzAxLTEzLjQyMSwzMi4yNjF2MjcuNDFINTQuODIzYy05LjksMC0xOC40NjQsMy42MTctMjUuNjk3LDEwLjg1ICAgYy03LjIzMyw3LjIzMi0xMC44NSwxNS44LTEwLjg1LDI1LjY5N3YzNjUuNDUzYzAsOS44OSwzLjYxNywxOC40NTYsMTAuODUsMjUuNjkzYzcuMjMyLDcuMjMxLDE1Ljc5NiwxMC44NDksMjUuNjk3LDEwLjg0OWg0MDEuOTg5ICAgYzkuODk3LDAsMTguNDctMy42MTcsMjUuNjk0LTEwLjg0OWM3LjIzNC03LjIzNCwxMC44NTItMTUuODA0LDEwLjg1Mi0yNS42OTNWMTA5LjYzOSAgIEM0OTMuMzU3LDk5LjczOSw0ODkuNzQzLDkxLjE3NSw0ODIuNTEzLDgzLjk0MnogTTM0Ny4xODcsNDUuNjg2YzAtMi42NjcsMC44NDktNC44NTgsMi41Ni02LjU2NyAgIGMxLjcxMS0xLjcxMSwzLjkwMS0yLjU2OCw2LjU3LTIuNTY4aDE4LjI2OGMyLjY3LDAsNC44NTMsMC44NTQsNi41NywyLjU2OGMxLjcxMiwxLjcxMiwyLjU2NywzLjkwMywyLjU2Nyw2LjU2N3Y4Mi4yMjQgICBjMCwyLjY2Ni0wLjg1NSw0Ljg1My0yLjU2Nyw2LjU2N2MtMS43MTgsMS43MDktMy45LDIuNTY4LTYuNTcsMi41NjhoLTE4LjI2OGMtMi42NjksMC00Ljg1OS0wLjg1NS02LjU3LTIuNTY4ICAgYy0xLjcxMS0xLjcxNS0yLjU2LTMuOTAxLTIuNTYtNi41NjdWNDUuNjg2eiBNMTI3LjkxNSw0NS42ODZjMC0yLjY2NywwLjg1NS00Ljg1OCwyLjU2OC02LjU2NyAgIGMxLjcxNC0xLjcxMSwzLjkwMS0yLjU2OCw2LjU2Ny0yLjU2OGgxOC4yNzFjMi42NjcsMCw0Ljg1OCwwLjg1NCw2LjU2NywyLjU2OGMxLjcxMSwxLjcxMiwyLjU3LDMuOTAzLDIuNTcsNi41Njd2ODIuMjI0ICAgYzAsMi42NjYtMC44NTUsNC44NTYtMi41Nyw2LjU2N2MtMS43MTMsMS43MDktMy45LDIuNTY4LTYuNTY3LDIuNTY4SDEzNy4wNWMtMi42NjYsMC00Ljg1Ni0wLjg1NS02LjU2Ny0yLjU2OCAgIGMtMS43MDktMS43MTUtMi41NjgtMy45MDEtMi41NjgtNi41NjdWNDUuNjg2eiBNNDU2LjgxMiw0NzUuMDg4SDU0LjgyM3YtMjkyLjM2aDQwMS45ODlWNDc1LjA4OHoiIGZpbGw9IiMwMDAwMDAiLz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K);
}

.ws-week-wrapper > .ws-week-picker {
  padding: 13px 0;
  top: 40px;
  width: 596px;
  height: 258px;
  padding-bottom: 19px;
  background-color: #FFFFFF;
  position: absolute;
  display: none;
  box-shadow: 2px 3px 28px 3px #b8b8b8;
  z-index: 8000;
}

.ws-week-wrapper > .ws-week-picker.opened {
  display: block;
}

.ws-week-wrapper > .ws-week-picker > .year-selector {
  display: inline-block;
}

.ws-week-wrapper > .ws-week-picker > .year-selector > .icon {
  margin-top: 0.375rem;
  height: 0.75rem;
  width: 0.75rem;
}

.ws-week-wrapper > .ws-week-picker > .year-selector > .icon[disabled] {
  visibility: hidden;
}

.ws-week-wrapper > .ws-week-picker > .year-selector > .year {
  color: #CBCDD5;
  font-weight: 600;
  padding-bottom: 13px;
}

.ws-week-wrapper > .ws-week-picker > .year-selector.prev-year {
  width: 85px;
  display: inline-block;
}

.ws-week-wrapper > .ws-week-picker > .year-selector.prev-year > .checkPrevYear {
  float: left;
  margin-left: 18px;
  background: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMjkgMTI5IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMjkgMTI5IiB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4Ij4KICA8Zz4KICAgIDxwYXRoIGQ9Im04OC42LDEyMS4zYzAuOCwwLjggMS44LDEuMiAyLjksMS4yczIuMS0wLjQgMi45LTEuMmMxLjYtMS42IDEuNi00LjIgMC01LjhsLTUxLTUxIDUxLTUxYzEuNi0xLjYgMS42LTQuMiAwLTUuOHMtNC4yLTEuNi01LjgsMGwtNTQsNTMuOWMtMS42LDEuNi0xLjYsNC4yIDAsNS44bDU0LDUzLjl6IiBmaWxsPSIjMDAwMDAwIi8+CiAgPC9nPgo8L3N2Zz4K) 0 -2px;
}

.ws-week-wrapper > .ws-week-picker > .year-selector.prev-year > .year {
  margin-left: 38px;
}

.ws-week-wrapper > .ws-week-picker > .year-selector.cur-year {
  width: 433px;
  margin: 0 -3px;
}

.ws-week-wrapper > .ws-week-picker > .year-selector.cur-year > .year {
  text-align: center;
}

.ws-week-wrapper > .ws-week-picker > .year-selector.next-year {
  width: 76px;
  float: right;
}

.ws-week-wrapper > .ws-week-picker > .year-selector.next-year > .checkNextYear {
  float: left;
  margin-left: -2px;
  background: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMjkgMTI5IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMjkgMTI5IiB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4Ij4KICA8Zz4KICAgIDxwYXRoIGQ9Im00MC40LDEyMS4zYy0wLjgsMC44LTEuOCwxLjItMi45LDEuMnMtMi4xLTAuNC0yLjktMS4yYy0xLjYtMS42LTEuNi00LjIgMC01LjhsNTEtNTEtNTEtNTFjLTEuNi0xLjYtMS42LTQuMiAwLTUuOCAxLjYtMS42IDQuMi0xLjYgNS44LDBsNTMuOSw1My45YzEuNiwxLjYgMS42LDQuMiAwLDUuOGwtNTMuOSw1My45eiIgZmlsbD0iIzAwMDAwMCIvPgogIDwvZz4KPC9zdmc+Cg==) 0 -2px;
}

.ws-week-wrapper > .ws-week-picker > .year-selector.next-year > .year {
  float: left;
  margin-left: 13px;
  padding-right: 6px;
}

.ws-week-wrapper > .ws-week-picker > .cur-year > .weeks,.ws-week-wrapper > .ws-week-picker > .next-year > .weeks {
  margin-left: -5px;
}

.ws-week-wrapper > .ws-week-picker .month {
  box-sizing: border-box;
  color: #CBCDD5;
  display: inline-block;
  width: 40px;
  height: 40px;
  padding-left: 5px;
  line-height: 39px;
  text-align: center;
  margin-left: 1px;
  margin-bottom: 4px;
  background-color: #DEF5FE;
}

.ws-week-wrapper > .ws-week-picker .weeks > .weekNumbers:last-child > .month {
  padding-left: 0;
  width: 45px;
}

.ws-week-wrapper > .ws-week-picker .weekNumbers {
  width: 35.3px;
  height: 35.3px;
  float: left;
  font-size: 14px;
}

.ws-week-wrapper > .ws-week-picker .week {
  background: 0 0;
  border: 1px solid transparent;
  border-radius: 150px;
  box-sizing: border-box;
  color: #393939;
  cursor: pointer;
  display: inline-block;
  width: 32px;
  height: 32px;
  line-height: 31px;
  text-align: center;
  margin: 3px 6px;
}

.ws-week-wrapper > .ws-week-picker .week.now,.ws-week-wrapper > .ws-week-picker .week.now:hover {
  background-color: #008DC9;
  color: #FFFFFF;
}

.ws-week-wrapper > .ws-week-picker .week:hover {
  background-color: #DEF5FE;
}

.ws-week-wrapper > .ws-week-picker .week[disabled] {
  color: #BDBFC7;
  background-color: #E9EAEF;
  cursor: not-allowed;
}
        /* endinject */
    </style>
</template>

<script>
(function(){
    /* inject:js */
    'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

//Get the contents of the template (_currentScript is available with webcomponents.js, use currentScript if you don't use this Polyfill)
var currentScript = document._currentScript || document.currentScript;
var template = currentScript.ownerDocument.querySelector('template');

var WSWeekPicker = function (_HTMLElement) {
  _inherits(WSWeekPicker, _HTMLElement);

  function WSWeekPicker() {
    _classCallCheck(this, WSWeekPicker);

    return _possibleConstructorReturn(this, Object.getPrototypeOf(WSWeekPicker).apply(this, arguments));
  }

  _createClass(WSWeekPicker, [{
    key: 'createdCallback',
    value: function createdCallback() {
      // Take all main DOM elements
      var clone = document.importNode(template.content, true);
      this.createShadowRoot().appendChild(clone);
      this.open = false;
      this.months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
      this.getAttributes();
      this.getElements();
      this.addListeners();
      this.setInputValue();
    }

    // Take all elements from week picker

  }, {
    key: 'getElements',
    value: function getElements() {
      this.wrapper = this.shadowRoot.querySelector('.ws-week-wrapper');
      this.input = this.shadowRoot.querySelector('.ws-week-input');
      this.calendar = this.shadowRoot.querySelector('.ws-week-picker');
      this.crossIcon = this.shadowRoot.querySelector('input + i');
      this.prevYearButton = this.shadowRoot.querySelector('.checkPrevYear');
      this.nextYearButton = this.shadowRoot.querySelector('.checkNextYear');
      // Calculate previous year and take previous year and weeks elements
      this.prevYear = this.curYear - 1;
      this.prevYearNumber = this.shadowRoot.querySelector('.prev-year > .year');
      this.prevYearWeeks = this.shadowRoot.querySelector('.prev-year > .weeks');
      // Take current year and weeks elements
      this.curYearNumber = this.shadowRoot.querySelector('.cur-year > .year');
      this.curYearWeeks = this.shadowRoot.querySelector('.cur-year > .weeks');
      // Calculate next year and take next year and weeks elements
      this.nextYear = this.curYear + 1;
      this.nextYearNumber = this.shadowRoot.querySelector('.next-year > .year');
      this.nextYearWeeks = this.shadowRoot.querySelector('.next-year > .weeks');
    }

    // Attach all event liteners

  }, {
    key: 'addListeners',
    value: function addListeners() {
      var _this2 = this;

      document.addEventListener('click', function (e) {
        return _this2.open && e.target != _this2 ? _this2.closeWeekPicker() : null;
      });
      this.input.addEventListener('click', function (e) {
        return _this2.open ? _this2.closeWeekPicker() : _this2.openWeekPicker();
      });
      this.crossIcon.addEventListener('click', function (e) {
        return _this2.open ? _this2.closeWeekPicker() : _this2.openWeekPicker();
      });
      this.calendar.addEventListener('click', function (e) {
        return _this2.calendarClick(e);
      });
      this.prevYearButton.addEventListener('click', function () {
        if (parseDate(_this2.prevYear, _this2.prevYearWeeksNumbers[0][0]) < parseDate(_this2.minYear, _this2.minWeek)) {
          return;
        }
        _this2.moveYearBefore();
      });
      this.nextYearButton.addEventListener('click', function () {
        if (parseDate(_this2.nextYear, _this2.nextYearWeeksNumbers[1][_this2.nextYearWeeksNumbers[1].length - 1]) > parseDate(_this2.maxYear, _this2.maxWeek)) {
          return;
        }
        _this2.moveYearAfter();
      });
    }
  }, {
    key: 'calendarClick',
    value: function calendarClick(e) {
      // If user pick on week number take all elements to return result to input field and close calendar
      if (e.target.classList.contains('week')) {
        var pickedWeekYear = void 0,
            pickedWeek = parseInt(e.target.innerHTML);
        if (e.target.classList.contains('prevYear')) {
          pickedWeekYear = this.prevYear;
        } else if (e.target.classList.contains('nextYear')) {
          pickedWeekYear = this.nextYear;
        } else {
          pickedWeekYear = this.curYear;
        }

        var pickedDate = parseDate(pickedWeekYear, pickedWeek);
        if (pickedDate < parseDate(this.minYear, this.minWeek) || pickedDate > parseDate(this.maxYear, this.maxWeek)) {
          return;
        }

        this.pickedWeekYear = pickedWeekYear;
        this.pickedWeekWrapper.className = 'week';
        this.pickedWeekWrapper = e.target;
        this.pickedWeekWrapper.className = 'week now';

        this.parseDates(pickedDate);
        this.setInputValue();
        this.closeWeekPicker();
        this.propagateWeekChanges(this.selectedWeek, this.selectedYear);
      }
    }

    // build calendar year, months and week numbers

  }, {
    key: 'buildCalendar',
    value: function buildCalendar() {
      this.destroyCalendar();
      this.buildYears();
      this.buildWeeksAndMonth();
    }

    // Clean all generated elements if user change year

  }, {
    key: 'destroyCalendar',
    value: function destroyCalendar() {
      this.prevYearNumber.innerHTML = '';
      this.prevYearWeeks.innerHTML = '';
      this.curYearNumber.innerHTML = '';
      this.curYearWeeks.innerHTML = '';
      this.nextYearNumber.innerHTML = '';
      this.nextYearWeeks.innerHTML = '';
    }
  }, {
    key: 'openWeekPicker',
    value: function openWeekPicker() {
      this.open = true;
      // Prevent on every click full redraw calendar
      this.calendar.className = 'ws-week-picker opened';
      this.input.className = 'ws-week-input active';
      this.crossIcon.className = 'icon icon-cross';
      // If input clear draw calendar and define current week and select it
      if (!this.pickedWeekWrapper) {
        this.buildCalendar();
        this.highlightCurrentWeek();
      } else {
        // if input have value - define current week as selected at previous time
        this.pickedWeekWrapper.className = 'week now';
      }
    }

    // Close calendar if user don't click on calendar

  }, {
    key: 'closeWeekPicker',
    value: function closeWeekPicker() {
      this.open = false;
      this.calendar.className = 'ws-week-picker';
      this.input.className = 'ws-week-input used';
      this.crossIcon.className = 'icon icon-calendar';
    }
  }, {
    key: 'setInputValue',
    value: function setInputValue() {
      this.input.value = this.selectedWeek + '-' + this.curYear;
    }

    // Changed year if user click left arrow button

  }, {
    key: 'moveYearBefore',
    value: function moveYearBefore() {
      this.curYear -= 1;
      this.prevYear -= 1;
      this.nextYear -= 1;
      this.buildCalendar();
      this.highlightCurrentWeek();
    }

    // Changed year if user click right arrow button

  }, {
    key: 'moveYearAfter',
    value: function moveYearAfter() {
      this.curYear += 1;
      this.prevYear += 1;
      this.nextYear += 1;
      this.buildCalendar();
      this.highlightCurrentWeek();
    }

    // Draw span with year number

  }, {
    key: 'buildYears',
    value: function buildYears() {
      this.prevYearNumber.innerHTML = '<span>' + this.prevYear + '</span>';
      var prevYearWeeksNumbers = weeksNumbersForYear(this.prevYear).slice(10);
      if (parseDate(this.prevYear, prevYearWeeksNumbers[0][0]) < parseDate(this.minYear, this.minWeek)) {
        this.prevYearButton.setAttribute('disabled', 'disabled');
        this.shadowRoot.querySelector('.prev-year .year').setAttribute('disabled', 'disabled');
      } else {
        this.prevYearButton.removeAttribute('disabled');
        this.shadowRoot.querySelector('.prev-year .year').removeAttribute('disabled');
      }

      this.nextYearNumber.innerHTML = '<span>' + this.nextYear + '</span>';
      var nextYearWeeksNumbers = weeksNumbersForYear(this.nextYear).slice(0, 2);
      if (parseDate(this.nextYear, nextYearWeeksNumbers[1][nextYearWeeksNumbers[1].length - 1]) > parseDate(this.maxYear, this.maxWeek)) {
        this.nextYearButton.setAttribute('disabled', 'disabled');
        this.shadowRoot.querySelector('.next-year .year').setAttribute('disabled', 'disabled');
      } else {
        this.nextYearButton.removeAttribute('disabled');
        this.shadowRoot.querySelector('.next-year .year').removeAttribute('disabled');
      }
      this.curYearNumber.innerHTML = '<span>' + this.curYear + '</span>';
    }

    // Draw months and week numbers

  }, {
    key: 'buildWeeksAndMonth',
    value: function buildWeeksAndMonth() {
      var _this3 = this;

      var self = this;
      this.prevYearWeeksNumbers = weeksNumbersForYear(this.prevYear).slice(10);
      // Draw month and it weeks in different spans
      this.prevYearWeeksNumbers.forEach(function (month, i) {
        _this3.prevYearWeeks.innerHTML += '<span class="weekNumbers">\n                                          <span class="month">' + self.months[i + 10] + '</span>\n                                          ' + month.map(function (week) {
          return '<span class="prevYear week" \n                                                ' + (parseDate(_this3.prevYear, week) < parseDate(_this3.minYear, _this3.minWeek) ? 'disabled="disabled"' : '') + '>\n                                                ' + week + '</span>';
        }).join('') + '\n                                          </span>\n                                       </span>';
      });
      this.curYearWeeksNumbers = weeksNumbersForYear(this.curYear);
      this.curYearWeeksNumbers.forEach(function (month, i) {
        _this3.curYearWeeks.innerHTML += '<span class="weekNumbers">\n                                          <span class="month">' + self.months[i] + '</span>\n                                          ' + month.map(function (week) {
          return '<span class="curYear week" \n                                              ' + (parseDate(_this3.curYear, week) < parseDate(_this3.minYear, _this3.minWeek) || parseDate(_this3.curYear, week) > parseDate(_this3.maxYear, _this3.maxWeek) ? 'disabled="disabled"' : '') + '>' + week + '</span>';
        }).join('') + '\n                                       </span>';
      });
      this.nextYearWeeksNumbers = weeksNumbersForYear(this.nextYear).slice(0, 2);
      this.nextYearWeeksNumbers.forEach(function (month, i) {
        _this3.nextYearWeeks.innerHTML += '<span class="weekNumbers">\n                                          <span class="month">' + self.months[i] + '</span>\n                                          ' + month.map(function (week) {
          return '<span class="nextYear week" \n                                              ' + (parseDate(_this3.nextYear, week) > parseDate(_this3.maxYear, _this3.maxWeek) ? 'disabled="disabled"' : '') + '>' + week + '</span>';
        }).join('') + '\n                                       </span>';
      });
    }

    // Highlight the current week number

  }, {
    key: 'highlightCurrentWeek',
    value: function highlightCurrentWeek() {
      if (this.selectedYear !== this.curYear) {
        return;
      }
      var wholeWeeks = this.shadowRoot.querySelectorAll('.cur-year .week');
      for (var i = 0; i < wholeWeeks.length; i++) {
        if (wholeWeeks[i].innerHTML == this.selectedWeek && wholeWeeks[i].parentElement.firstElementChild.innerHTML == this.selectedMonth) {
          this.pickedWeekWrapper = wholeWeeks[i];
          this.pickedWeekWrapper.className = 'week now';
        }
      }
    }
  }, {
    key: 'getAttributes',
    value: function getAttributes() {
      var selectedYear = parseInt(this.getAttribute('year'));
      var selectedWeek = parseInt(this.getAttribute('week'));
      this.date = selectedYear && selectedWeek ? parseDate(selectedYear, selectedWeek) : new Date();
      this.parseDates(this.date);
      this.minWeek = this.getAttribute('min-week');
      this.minYear = this.getAttribute('min-year');
      this.maxWeek = this.getAttribute('max-week');
      this.maxYear = this.getAttribute('max-year');
    }
  }, {
    key: 'parseDates',
    value: function parseDates(date) {
      this.curYear = this.selectedYear = date.getFullYear();
      this.prevYear = this.curYear - 1;
      this.nextYear = this.curYear + 1;
      this.selectedMonth = this.months[date.getMonth()];
      this.selectedWeek = getWeek(this.selectedYear, date.getMonth(), date.getDate());
    }
  }, {
    key: 'propagateWeekChanges',
    value: function propagateWeekChanges(week, year) {
      var event = new CustomEvent("change", {
        detail: {
          week: week,
          year: year
        }
      });
      this.dispatchEvent(event);
    }
  }, {
    key: 'attributeChangedCallback',
    value: function attributeChangedCallback(attrName, oldVal, newVal) {
      switch (attrName) {
        case "year":
        case "week":
        case "min-week":
        case "max-week":
        case "min-year":
        case "max-year":
          this.getAttributes();
          this.buildCalendar();
          this.setInputValue();
          break;
      }
    }
  }]);

  return WSWeekPicker;
}(HTMLElement);

//Register the element with the document


document.registerElement('ws-week-picker', WSWeekPicker);

//
// HELPERS
//
function getWeek(year, month, day) {
  var y2k = function y2k(number) {
    return number < 1000 ? number + 1900 : number;
  };
  var when = new Date(year, month, day);
  var newYear = new Date(year, 0, 1);
  var modDay = newYear.getDay();
  if (modDay == 0) modDay = 6;else modDay--;
  // Days between current day and 1st of January
  var daynum = (Date.UTC(y2k(year), when.getMonth(), when.getDate(), 0, 0, 0) - Date.UTC(y2k(year), 0, 1, 0, 0, 0)) / 1000 / 60 / 60 / 24 + 1;

  if (modDay < 4) {
    var weeknum = Math.floor((daynum + modDay - 1) / 7) + 1;
  } else {
    var weeknum = Math.floor((daynum + modDay - 1) / 7);
    if (weeknum == 0) {
      year--;
      var prevNewYear = new Date(year, 0, 1);
      var prevmodDay = prevNewYear.getDay();
      if (prevmodDay == 0) prevmodDay = 6;else prevmodDay--;
      if (prevmodDay < 4) weeknum = 53;else weeknum = 52;
    }
  }

  return weeknum;
}

function parseDate(year, week) {
  var simple = new Date(year, 0, 1 + (week - 1) * 7);
  var dow = simple.getDay();
  var ISOweekStart = simple;
  if (dow <= 4) ISOweekStart.setDate(simple.getDate() - simple.getDay() + 1);else ISOweekStart.setDate(simple.getDate() + 8 - simple.getDay());
  return ISOweekStart;
}

// Calculate all week numbers of year in January and save them in array
// January is explicitly to other months, because need to calculate first week of year
// It can be week number from previous year
function janWeekNumbers(year) {
  var firstMonthWeeks = [];
  var firstWeek = 1;
  var lastWeek = getWeek(year, 0, 31);
  if (firstWeek != 1) {
    firstMonthWeeks[0] = firstWeek;
    for (var j = 1; j <= lastWeek; j++) {
      firstMonthWeeks.push(j);
    }
  } else {
    for (var _j = 0; _j < lastWeek; _j++) {
      firstMonthWeeks.push(_j + 1);
    }
  }
  return firstMonthWeeks;
}

// Return array of all week numbers of year in month
function weekNumbersByMonth(year, month) {
  var monthWeeks = [];
  var firstWeek = getWeek(year, month, 1);
  var lastWeek = getWeek(year, month, 31);
  for (var j = firstWeek; j <= lastWeek; j++) {
    monthWeeks.push(j);
  }
  return monthWeeks;
}

// Array of all weeks in year, splited by month
function weeksNumbersForYear(year) {
  var weeks = [];
  weeks[0] = janWeekNumbers(year);
  for (var i = 1; i <= 11; i++) {
    weeks[i] = weekNumbersByMonth(year, i);
    if (weeks[i - 1][weeks[i - 1].length - 1] === weeks[i][0]) {
      weeks[i] = weeks[i].slice(1);
    }
  }
  return weeks;
}
    /* endinject */
})()
</script>
